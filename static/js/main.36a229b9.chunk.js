(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/loading.3d6fa003.gif"},26:function(e,t,n){e.exports=n(41)},34:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n(3),c=n(4),s=n(6),l=n(5),h=n(7),u=n(11),p=n(9),d="REQUEST_PHOTOS",f="RECEIVE_PHOTOS",m="RECEIVE_ERROR",g="LOADMORE",v="REQUEST_LOADMORE",y="NONE",E="SEARCH_REQUEST_PHOTOS",b="SEARCH_RECEIVE_PHOTOS",j="SEARCH_RECEIVE_ERROR",x="LOAD_MORE",O="SEARCH_REQUEST_LOADMORE",w="SEARCH_UPDATE_SEARCH_TEXT";function k(){return{type:m}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return t({type:d}),fetch("https://api.flickr.com/services/rest/?method=flickr.interestingness.getList&api_key=ac9fd35025c930e3ea8d613813e10434&extras=owner_name%2Curl_n%2Cviews&per_page=20&page=".concat(e,"&format=json&nojsoncallback=1")).then(function(e){return e.json()}).then(function(e){return t({type:f,data:e.photos})}).catch(function(e){return t(k())})}}function _(e,t){return e>t?{type:y}:function(t){return t({type:v}),fetch("https://api.flickr.com/services/rest/?method=flickr.interestingness.getList&api_key=ac9fd35025c930e3ea8d613813e10434&extras=owner_name%2Curl_n%2Cviews&per_page=20&page=".concat(e,"&format=json&nojsoncallback=1")).then(function(e){return e.json()}).then(function(e){return t({type:g,data:e})}).catch(function(e){return t(k())})}}function S(){return{type:j}}function L(e){return{type:w,searchText:e}}function P(e){return function(t){return t({type:E}),fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=ac9fd35025c930e3ea8d613813e10434&tags=".concat(e,"&extras=owner_name%2Curl_n%2Cviews&per_page=20&page=1&format=json&nojsoncallback=1")).then(function(e){return e.json()}).then(function(e){return t({type:b,data:e.photos})}).catch(function(e){return t(S())})}}function T(e,t,n){return t>n?{type:y}:function(n){return n({type:O}),fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=ac9fd35025c930e3ea8d613813e10434&tags=".concat(e,"&extras=owner_name%2Curl_n%2Cviews&per_page=20&page=").concat(t,"&format=json&nojsoncallback=1")).then(function(e){return e.json()}).then(function(e){return n(function(e){return{type:x,data:e}}(e))}).catch(function(e){return n(S())})}}var R={photos:[],page:1,perPage:20,maxPage:null,isLoading:!1,isError:!1,loadmore:!1};var H={photos:[],page:1,perPage:20,maxPage:null,isLoading:!1,isError:!1,loadmore:!1,searchText:""};var I=Object(u.c)({explore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object.assign({},e,{isLoading:!0});case m:return Object.assign({},e,{photos:[],isError:!0});case f:return Object.assign({},e,{photos:t.data.photo,perPage:t.data.perpage,maxPage:t.data.pages,isLoading:!1,isError:!1});case g:return Object.assign({},e,{photos:e.photos.concat(t.data.photos.photo),perPage:t.data.photos.perPage,page:t.data.photos.page,loadmore:!1,maxPage:t.data.photos.pages});case v:return Object.assign({},e,{loadmore:!0});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object.assign({},e,{isLoading:!0});case j:return Object.assign({},e,{isError:!0});case b:return Object.assign({},e,{photos:t.data.photo,perPage:t.data.perpage,maxPage:t.data.pages,isLoading:!1,isError:!1});case w:return Object.assign({},e,{searchText:t.searchText});case O:return Object.assign({},e,{loadmore:!0});case x:return Object.assign({},e,{photos:e.photos.concat(t.data.photos.photo),perPage:t.data.photos.perpage,page:t.data.photos.page,loadmore:!1,maxPage:t.data.photos.pages});default:return e}}}),D=(n(34),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={hide:!0},n.clickIconSearch=function(){n.setState({hide:!n.state.hide})},n.onChange=function(e){n.props.onChange(e.target.value)},n.onSubmit=function(e){13===e.keyCode&&(n.props.history.push("/photov2/search"),n.props.onSubmit(n.props.searchText))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tbContainer"},r.a.createElement("div",{className:"appName",onClick:function(){return e.props.history.push("/photov2")}},"Photo"),r.a.createElement(a.Fragment,null,r.a.createElement("i",{className:"material-icons searchIcon",onClick:this.clickIconSearch},"search")),r.a.createElement("input",{type:"text",className:"search ".concat(this.state.hide?"hide":""),onChange:this.onChange,value:this.props.searchText,onKeyUp:this.onSubmit}))}}]),t}(a.Component)),M=Object(p.b)(function(e,t){return{searchText:e.search.searchText}},function(e){return{onChange:function(t){e(L(t))},onSubmit:function(t){e(P(t))}}})(D),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={hover:!1},n.onMouseEnter=function(){n.setState({hover:!0})},n.onMouseLeave=function(){n.setState({hover:!1})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.item,a=t.width;return r.a.createElement("div",{style:V.itemContainer,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:function(){return e.props.history.push("/photov2/image/".concat(n.id))}},r.a.createElement("div",{style:{backgroundImage:"url(".concat(n.url_n,")"),backgroundSize:"cover",width:a,height:300,backgroundPosition:"center"}},this.state.hover&&r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:a,height:"100%",background:"linear-gradient(0deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%)",justifyContent:"flex-end"}},r.a.createElement("h4",{style:{color:"white",paddingLeft:10}},n.title),r.a.createElement("div",{style:{color:"white",paddingLeft:10}},"Owner: ",n.ownername),r.a.createElement("div",{style:{color:"white",paddingLeft:10,marginBottom:10}},"Views: ",n.views))))}}]),t}(a.Component),V={itemContainer:{height:300,width:"100%",backgroundColor:"black"}};var N=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.width,o=t.cols,i=t.widthCol;return r.a.createElement("div",{style:{marginTop:65,display:"grid",width:a,gridTemplateColumns:function(e,t){for(var n="",a=0;a<e;a++)n+="".concat(t,"px ");return n}(o,i),gridGap:5}},n.map(function(t,n){return r.a.createElement(A,{key:n,width:i,item:t,history:e.props.history})}))}}]),t}(a.Component),U=n(12),F=n.n(U),z=(n(36),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).state={isVisible:!1},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.state.isVisible&&this.show()}},{key:"show",value:function(){var e=this;this.setState({isVisible:!0},function(){return e.dialog.showModal()})}},{key:"hide",value:function(){var e=this;this.setState({isVisible:!1},function(){return e.dialog.close()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.visible!==this.state.isVisible&&this.setState({isVisible:e.visible},function(){t.state.isVisible?t.show():t.hide()})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("dialog",{className:"dialog",ref:function(t){return e.dialog=t}},this.props.children))}}]),t}(a.Component)),Q=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleScroll=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,r=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight);e+window.pageYOffset>=r&&!n.props.loadmore&&n.props.loadmorePhoto(n.props.page+1,n.props.maxPage)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPhotos(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.photo,a=e.error;return t?r.a.createElement("div",{style:W.loadingContainer},r.a.createElement("img",{src:F.a,alt:"loading",style:W.loadingImg})):a?r.a.createElement(z,null,r.a.createElement("h1",null,"C\xf3 l\u1ed7i x\u1ea3y ra!")):r.a.createElement(N,{data:n,cols:3,width:900,widthCol:300,history:this.props.history})}}]),t}(a.Component),W={loadingContainer:{width:"100%",height:590,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},loadingImg:{width:100,height:100}},B=Q,J=Object(p.b)(function(e,t){return{photo:e.explore.photos,page:e.explore.page,maxPage:e.explore.maxPage,isLoading:e.explore.isLoading,loadmore:e.explore.loadmore,error:e.explore.isError}},function(e){return{fetchPhotos:function(){e(C())},loadmorePhoto:function(t,n){e(_(t,n))}}})(B),Y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleScroll=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,r=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight);e+window.pageYOffset>=r&&!n.props.loadmore&&n.props.loadmorePhoto(n.props.searchText,n.props.page+1,n.props.maxPage)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.photo,a=e.error;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{visible:a},r.a.createElement("h1",null,"C\xf3 l\u1ed7i x\u1ea3y ra!")),r.a.createElement("div",{style:G.loadingContainer},r.a.createElement("img",{src:F.a,alt:"loading",style:G.loadingImg}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{visible:a},r.a.createElement("h1",null,"C\xf3 l\u1ed7i x\u1ea3y ra!")),r.a.createElement(N,{data:n,cols:3,width:900,widthCol:300,history:this.props.history}))}}]),t}(a.Component),G={loadingContainer:{width:"100%",height:590,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},loadingImg:{width:100,height:100}},K=Y,X=Object(p.b)(function(e,t){return{photo:e.search.photos,isLoading:e.search.isLoading,page:e.search.page,maxPage:e.search.maxPage,searchText:e.search.searchText,loadmore:e.search.loadmore,error:e.search.isError}},function(e){return{loadmorePhoto:function(t,n,a){e(T(t,n,a))}}})(K),q=n(43),Z=n(44),$=n(21),ee=n(22),te=n(15),ne=n.n(te),ae=n(23),re=n(24),oe=n.n(re),ie=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={info:null,url:null,likes:null,isLoading:!0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ae.a)(ne.a.mark(function e(){var t,n,a,r,o,i,c;return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.props.match.params.id,e.prev=1,e.next=4,fetch("https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=ac9fd35025c930e3ea8d613813e10434&photo_id=".concat(c,"&format=json&nojsoncallback=1"));case 4:return t=e.sent,e.next=7,fetch("https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=ac9fd35025c930e3ea8d613813e10434&photo_id=".concat(c,"&format=json&nojsoncallback=1"));case 7:return n=e.sent,e.next=10,fetch("https://api.flickr.com/services/rest/?method=flickr.photos.getFavorites&api_key=ac9fd35025c930e3ea8d613813e10434&photo_id=".concat(c,"&format=json&nojsoncallback=1"));case 10:return a=e.sent,e.next=13,t.json();case 13:return r=e.sent,e.next=16,n.json();case 16:return o=e.sent,e.next=19,a.json();case 19:i=e.sent,e.next=24;break;case 22:e.prev=22,e.t0=e.catch(1);case 24:this.setState({info:r.photo,url:o.sizes.size[6].source,likes:i.photo.total,isLoading:!1});case 25:case"end":return e.stop()}},e,this,[[1,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.isLoading)return r.a.createElement("div",{style:{width:"100%",height:590,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},r.a.createElement("img",{src:F.a,alt:"loading",style:{width:100,height:100}}));var t=this.state.info.tags.tag,n=this.state.info;return r.a.createElement("div",{style:{width:"100%",height:590,display:"flex"}},r.a.createElement("div",{style:{display:"flex",flex:3,backgroundColor:"#cecece",justifyContent:"center",alignItems:"flex-end",backgroundImage:"url(".concat(this.state.url,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),r.a.createElement("div",{style:{flex:2,backgroundColor:"#cecece",borderLeftStyle:"solid",borderLeftWidth:1,paddingLeft:10,paddingRight:10,overflow:"scroll"}},r.a.createElement("h2",null,n.title._content),r.a.createElement("h4",null,n.owner.realname?n.owner.realname:n.owner.username),r.a.createElement("p",null,n.description._content),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"space-around",justifyContent:"center",marginTop:10}},r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row"}},r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",null,n.views),r.a.createElement("div",null,"l\u01b0\u1ee3t xem")),r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",null,this.state.likes),r.a.createElement("div",null,"l\u01b0\u1ee3t th\xedch"))),r.a.createElement("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center"}},"Ng\xe0y ch\u1ee5p: ",n.dates.taken)),r.a.createElement("hr",null),r.a.createElement("h3",null,"Tags"),r.a.createElement("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"210px 210px",paddingBottom:10,justifyContent:"center"}},t.map(function(t,n){return r.a.createElement("div",{key:n,style:{backgroundColor:"green",borderRadius:10,marginLeft:5,marginRight:5,marginTop:5,textAlign:"center",overflow:"hidden",fontSize:16,color:"white"},onClick:function(){e.props.history.push("/photov2/search"),e.props.updateSearchText(t._content),e.props.searchFetchPhotos(t._content)}},oe()(t._content))}))))}}]),t}(a.Component),ce=Object(p.b)(null,function(e){return{updateSearchText:function(t){e(L(t))},searchFetchPhotos:function(t){e(P(t))}}})(ie),se=Object(ee.createLogger)(),le=Object(u.d)(I,Object(u.a)($.a,se)),he=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:le},r.a.createElement(q.a,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(Z.a,{path:"*",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(Z.a,{path:"/photov2",exact:!0,render:function(e){return r.a.createElement(J,e)}}),r.a.createElement(Z.a,{path:"/photov2/search",exact:!0,render:function(e){return r.a.createElement(X,e)}}),r.a.createElement(Z.a,{path:"/photov2/image/:id",exact:!0,render:function(e){return r.a.createElement(ce,e)}}))))}}]),t}(a.Component);Object(o.render)(r.a.createElement(he,null),document.getElementById("root"))}},[[26,2,1]]]);
//# sourceMappingURL=main.36a229b9.chunk.js.map